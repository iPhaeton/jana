{"version":3,"sources":["webpack:///./javascripts/sockJSClient.js"],"names":["makeSearchRequest","request","data","onSearchEnd","onSearchResult","key","Math","random","shop","socket","callbacks","searchResult","err","done","resultKey","alert","send","JSON","stringify"],"mappings":";;;;;AAAA;;;;;AAEA,UAASA,iBAAT,CAA2BC,OAA3B,EAAoCC,IAApC,EAA0CC,WAA1C,EAAuDC,cAAvD,EAAuE;AACnE,SAAIC,MAAMC,KAAKC,MAAL,EAAV;;AAEAC,UAAKC,MAAL,CAAYC,SAAZ,CAAsBC,YAAtB,GAAqC,UAAUC,GAAV,EAAeV,IAAf,EAAqBW,IAArB,EAA2BC,SAA3B,EAAsC;AACvE,aAAIZ,SAAS,gBAAb,EAA+B;AAC3BC,yBAAY,IAAZ,EAAkB,IAAlB;AACA;AACH;;AAED,aAAIS,GAAJ,EAAS;AACLG,mBAAM,4CAAN;AACAN,oBAAOC,SAAP,CAAiBC,YAAjB,GAAgC,IAAhC;AACA;AACH;;AAED,aAAI,CAACT,IAAL,EAAW;AACPa,mBAAM,mBAAN;AACA;AACH;;AAED,aAAID,cAAcT,GAAlB,EAAuB;;AAEvBD,wBAAeF,IAAf,EAAqBW,IAArB;AACH,MApBD;;AAsBAL,UAAKC,MAAL,CAAYO,IAAZ,CAAiBC,KAAKC,SAAL,CAAe;AAC5BjB,kBAAS,aAAaA,OADM;AAE5BC,eAAMA,IAFsB;AAG5BG,cAAKA;AAHuB,MAAf,CAAjB;AAKH;;SAEOL,iB,GAAAA,iB","file":"5.5.js","sourcesContent":["\"use strict\";\r\n\r\nfunction makeSearchRequest(request, data, onSearchEnd, onSearchResult) {\r\n    var key = Math.random();\r\n\r\n    shop.socket.callbacks.searchResult = function (err, data, done, resultKey) {\r\n        if (data === \"searchComplete\") {\r\n            onSearchEnd(null, null);\r\n            return;\r\n        };\r\n\r\n        if (err) {\r\n            alert(\"Ошибка поиска. Выведены не все результаты.\");\r\n            socket.callbacks.searchResult = null;\r\n            return;\r\n        };\r\n\r\n        if (!data) {\r\n            alert(\"Ничего не найдено\");\r\n            return;\r\n        };\r\n\r\n        if (resultKey !== key) return;\r\n\r\n        onSearchResult(data, done);\r\n    };\r\n\r\n    shop.socket.send(JSON.stringify({\r\n        request: \"/search?\" + request,\r\n        data: data,\r\n        key: key\r\n    }));\r\n};\r\n\r\nexport {makeSearchRequest};\n\n\n/** WEBPACK FOOTER **\n ** ./javascripts/sockJSClient.js\n **/"],"sourceRoot":""}